<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title>复选框的全选和取消全选</title>
  </head>
  <body>
    <script type="text/javascript">
      /*
      window.onload = function(){
        var firstChk = document.getElementById("firstChk");
        firstChk.onclick = function(){
          //获取第一个复选框的选中状态（复选框对象checkbox对象）
          //根据name获取所有元素
          var hobbies = document.getElementsByName("hobby");

          if(firstChk.checked){
            //全选
            for(var i = 0; i<hobbies.length ;i++){
              hobbies[i].checked = true;
            }
          }else{
            //取消全选
            for(var i = 0; i<hobbies.length ;i++){
              hobbies[i].checked = false;
            }
          }
        }
      }
      */

      //将以上代码优化
      window.onload = function(){
        var firstChk = document.getElementById("firstChk");
        var hobbies = document.getElementsByName("hobby");
        firstChk.onclick = function(){
          //获取第一个复选框的选中状态（复选框对象checkbox对象）
          //根据name获取所有元素
          for(var i = 0; i<hobbies.length ;i++){
              hobbies[i].checked = firstChk.checked;
          }
        }

        //对以上数组进行遍历
        var all = hobbies.length;
        for(var i = 0;i<hobbies.length;i++){
           hobbies[i].onclick = function(){
              var checkedCount = 0;
              //总数量和选中的数量想等的时候，第一个复选框选中
              for(var i = 0;i<hobbies.length;i++){
                if(hobbies[i].checked){
                  checkedCount++;
                }
              }

              firstChk.checked = (all == checkedCount);
              /*
              if(all == checkedCount){
                firstChk.checked = true;
              }else{
                firstChk.checked = false;
              }
              */
           }
        }
      }
    </script>
    <input type="checkbox" id="firstChk" /><br>
    <input type="checkbox" name="hobby" value="smoke"/>抽烟<br>
    <input type="checkbox" name="hobby" value="drink"/>喝酒<br>
    <input type="checkbox" name="hobby" value="firehair"/>汤头<br>
  </body>
</html>